(this["webpackJsonprealtor-assist"]=this["webpackJsonprealtor-assist"]||[]).push([[0],{212:function(e,t){},213:function(e,t,a){e.exports=a(440)},377:function(e,t,a){},440:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),l=a(26),o=a(62),c=a(15),i=a(28),u=function(){var e=new i.Browser("JWT_ACCESS");return e.getToken()?{firstName:e.getClaim("firstName"),role:e.getClaim("role"),id:e.getClaim("sub")}:null},m={details:u()},d={user:m},p=Object(o.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return new i.Browser("JWT_ACCESS",t.payload.tokens.access),new i.Browser("JWT_REFRESH",t.payload.tokens.refresh),Object(c.a)({},e,{details:u()});case"LOGOUT":var a=new i.Browser("JWT_ACCESS");a.getToken()&&a.eject();var n=new i.Browser("JWT_REFRESH");return n.getToken()&&n.eject(),Object(c.a)({},e,{details:u()});default:return Object(c.a)({},e,{details:u()})}}});var g,h=(g=d,Object(o.c)(p,g,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),E=a(145),f=a(36),b=a(43),v=a(445),w=a(446),k=a(202),C=a(447),y=a(448);function N(e){return r.a.createElement(v.a,null,r.a.createElement(w.a,null,r.a.createElement(k.a,null,r.a.createElement(C.a,{fluid:!0,className:"mt-4"},r.a.createElement("img",{src:"ralogo.png",alt:"logo",className:"text-center"}),r.a.createElement("h1",{className:"text-center"},"Realtor Assist"),r.a.createElement("p",{className:"text-center"},"Helping your Real Estate office run more efficiently"),r.a.createElement(w.a,{className:"text-center"},r.a.createElement(k.a,null,r.a.createElement(y.a,{type:"submit",className:"btn btn-primary",onClick:function(){return e.history.push("/signup")}},"Signup")),r.a.createElement(k.a,null,r.a.createElement(y.a,{type:"submit",className:"btn btn-primary",onClick:function(){return e.history.push("/login")}},"Login")))),r.a.createElement(C.a,{fluid:!0,className:"mt-4"},r.a.createElement("h1",{className:"text-center"},"Helping real estate assistants & coordinators create organizational systems for the real estate office"),r.a.createElement(w.a,{className:"text-center"},r.a.createElement(k.a,null))))))}var j=a(37),L=a.n(j),S=a(450),O=a(451),B=a(107),T=a(29),x=function(e){return{type:"LOGIN",payload:{tokens:e}}},_=function(){return{type:"LOGOUT"}},D=a(52),R=a.n(D),I={getListings:function(){return F.get("/listings")},getListing:function(e){return F.get("/listings/"+e)},deleteListing:function(e){return F.delete("/listings/"+e)},saveListing:function(e){return F.post("/listings",e)},adjustListing:function(e,t){return F.put("/listings/"+e,t)}},F=R.a.create({baseURL:"/api/protected"});function A(){var e=new i.Browser("JWT_ACCESS");if(e.getToken()&&e.valid())return Promise.resolve(q(e));var t=new i.Browser("JWT_REFRESH");return t.getToken()?t.valid()?R.a.post("/api/auth/refresh",{token:t.getToken()}).then((function(e){return e.data})).then((function(e){return e.success?(new i.Browser("JWT_REFRESH",e.tokens.refresh),q(new i.Browser("JWT_ACCESS",e.tokens.access))):Promise.reject(e.errors.token)})):Promise.reject("Refresh token not valid on client."):Promise.reject("Refresh token not found on client.")}function q(e){return{Authorization:"Bearer "+e.getToken()}}F.interceptors.request.use((function(e){var t,a;return L.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=R.a.CancelToken.source(),n.prev=1,n.next=4,L.a.awrap(A());case 4:a=n.sent,n.next=12;break;case 7:return n.prev=7,n.t0=n.catch(1),h.dispatch({type:"LOGOUT"}),t.cancel("Request canceled: ".concat(n.t0)),n.abrupt("return",{cancelToken:t.token});case 12:return e.headers=Object(c.a)({},e.headers,{},a),n.abrupt("return",e);case 14:case"end":return n.stop()}}),null,null,[[1,7]])}));var G=Object(c.a)({signup:function(e){return R.a.post("/api/auth/signup",e).then((function(e){return e.data}))},login:function(e){return R.a.post("/api/auth/login",e).then((function(e){return e.data}))}},I),H=a(449);function W(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control"},e)))}function J(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",Object.assign({className:"form-control",rows:"5"},e)))}function P(e){return r.a.createElement("button",Object.assign({},e,{style:{float:"right",marginBottom:10},className:"btn btn-success"}),e.children)}function U(e){var t=e.axiosError;if(!t||!t.response)return null;var a,n=t.response,s=n.statusText,l=n.status;return a=t.response.data.error?t.response.data.error:t,r.a.createElement(H.a,{variant:"danger"},l," ",s,r.a.createElement("br",null),"Error Name: ",a.name,r.a.createElement("br",null),"Error Message: ",a.message)}var M=T.object({username:T.string().required(),password:T.string().required()}),z=Object(l.b)(null,{onLogin:x})((function(e){return r.a.createElement(S.a,{show:!0,onHide:function(){return e.history.push("/")},animation:!1,size:"lg","aria-labelledby":"login-form",centered:!0},r.a.createElement(S.a.Header,{closeButton:!0},r.a.createElement(S.a.Title,{id:"login-form"},"Realtor Assist Login")),r.a.createElement(S.a.Body,null,r.a.createElement("h5",{className:"card-title"},"Login to your dashboard"),r.a.createElement(B.a,{initialValues:{username:"",password:""},validationSchema:M,onSubmit:function(t,a){var n;return L.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,L.a.awrap(G.login(t));case 3:(n=r.sent).success?e.onLogin(n.tokens):a.setErrors(n.errors),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),a.setStatus(r.t0);case 10:return r.abrupt("return");case 11:case"end":return r.stop()}}),null,null,[[0,7]])}},(function(e){var t=e.status,a=e.values,n=e.errors,s=e.touched,l=e.handleChange,o=e.handleBlur,c=e.handleSubmit,i=e.isSubmitting;return r.a.createElement(O.a,{noValidate:!0,onSubmit:c},r.a.createElement(U,{axiosError:t}),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:k.a,controlId:"username"},r.a.createElement(O.a.Label,null,"Username"),r.a.createElement(O.a.Control,{required:!0,name:"username",autoComplete:"username",placeholder:"Username",onChange:l,onBlur:o,value:a.username,isInvalid:!!n.username}),r.a.createElement(O.a.Control.Feedback,{type:"invalid"},n.username&&s.username&&n.username))),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:k.a,controlId:"Password"},r.a.createElement(O.a.Label,null,"Password"),r.a.createElement(O.a.Control,{autoComplete:"current-password",required:!0,name:"password",type:"password",onChange:l,onBlur:o,value:a.password,isInvalid:!!n.password}),r.a.createElement(O.a.Control.Feedback,{type:"invalid"},n.password&&s.password&&n.password))),r.a.createElement(y.a,{type:"submit",className:"btn btn-primary",disabled:i},"Submit"))})),r.a.createElement(f.b,{className:"link",to:"/signup"},"Don't have an account? ",r.a.createElement("span",{className:"link-signup"},"Signup"))))})),V=a(63),X=a(64),Y=a(65),$=a(70),K=a(66),Q=a(71);a(377);var Z=function(e){return r.a.createElement("span",Object.assign({className:"delete-btn"},e,{role:"button",tabIndex:"0"}),"\u2717")};var ee=function(e){var t=e.children;return r.a.createElement("div",{style:{height:300,clear:"both",paddingTop:120,textAlign:"center"},className:"jumbotron"},t)};function te(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"container".concat(t?"-fluid":"")},a)}function ae(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"row".concat(t?"-fluid":"")},a)}function ne(e){var t=e.size,a=e.children;return r.a.createElement("div",{className:t.split(" ").map((function(e){return"col-"+e})).join(" ")},a)}var re=a(453),se=a(208),le=a.n(se),oe=function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object($.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={contract:a.props.listing.contract||!1,mls:a.props.listing.mls||!1,showingTime:a.props.listing.showingTime||!1,compliance:a.props.listing.compliance||!1,disclosures:a.props.listing.disclosures||!1,faceBook:a.props.listing.faceBook||!1},a.toggleChangeContract=function(){G.adjustListing(a.props.listing._id,Object(c.a)({},a.props.listing,{contract:!a.state.contract})),a.setState((function(e){return{contract:!e.contract}}))},a.toggleChangeMls=function(){G.adjustListing(a.props.listing._id,Object(c.a)({},a.props.listing,{mls:!a.state.mls})),a.setState((function(e){return{mls:!e.mls}}))},a.toggleChangeShowingTime=function(){G.adjustListing(a.props.listing._id,Object(c.a)({},a.props.listing,{showingTime:!a.state.showingTime})),a.setState((function(e){return{showingTime:!e.showingTime}}))},a.toggleChangeCompliance=function(){G.adjustListing(a.props.listing._id,Object(c.a)({},a.props.listing,{compliance:!a.state.compliance})),a.setState((function(e){return{compliance:!e.compliance}}))},a.toggleChangeDisclosures=function(){G.adjustListing(a.props.listing._id,Object(c.a)({},a.props.listing,{disclosures:!a.state.disclosures})),a.setState((function(e){return{disclosures:!e.disclosures}}))},a.toggleChangeFaceBook=function(){G.adjustListing(a.props.listing._id,Object(c.a)({},a.props.listing,{faceBook:!a.state.faceBook})),a.setState((function(e){return{faceBook:!e.faceBook}}))},a}return Object(Q.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{type:"checkbox",checked:this.state.contract,onChange:this.toggleChangeContract,className:"form-check-input"}),"Signed contract")),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{type:"checkbox",checked:this.state.mls,onChange:this.toggleChangeMls,className:"form-check-input"}),"Uploaded to the MLS")),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{type:"checkbox",checked:this.state.showingTime,onChange:this.toggleChangeShowingTime,className:"form-check-input"}),"Showing Time added to listing")),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{type:"checkbox",checked:this.state.compliance,onChange:this.toggleChangeCompliance,className:"form-check-input"}),"Compliance form uploaded")),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{type:"checkbox",checked:this.state.disclosures,onChange:this.toggleChangeDisclosures,className:"form-check-input"}),"Property disclosures uploaded")),r.a.createElement("div",{className:"form-check"},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{type:"checkbox",checked:this.state.faceBook,onChange:this.toggleChangeFaceBook,className:"form-check-input"}),"Advertised on Facebook")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Submit"))))}}]),t}(n.Component),ce=function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object($.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={listings:[],address:"",startDate:new Date,notes:"",contract:!1,mls:!1,showingTime:!1,compliance:!1,disclosures:!1,faceBook:!1},a.loadListings=function(){G.getListings().then((function(e){return a.setState({listings:e.data,address:"",startDate:new Date,notes:"",contract:!1,mls:Boolean,showingTime:Boolean,compliance:Boolean,disclosures:Boolean,faceBook:Boolean})})).catch((function(e){return console.log(e)}))},a.deleteListing=function(e){G.deleteListing(e).then((function(e){return a.loadListings()})).catch((function(e){return console.log(e)}))},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(V.a)({},n,r))},a}return Object(Q.a)(t,e),Object(Y.a)(t,[{key:"componentDidMount",value:function(){this.loadListings()}},{key:"render",value:function(){var e=this;return r.a.createElement(te,{fluid:!0},r.a.createElement(ae,null,r.a.createElement(ne,{size:"md-6 sm-12"},r.a.createElement(ee,null,r.a.createElement("h1",null,"My Property Listings")),this.state.listings.map((function(t){return r.a.createElement(re.a,{key:t._id,style:{width:"18rem"}},r.a.createElement(re.a.Img,{variant:"top",src:"holder.js/100px180?text=Image cap"}),r.a.createElement(re.a.Body,null,r.a.createElement(Z,{onClick:function(){return e.deleteListing(t._id)}}),r.a.createElement(re.a.Title,null,t.address),r.a.createElement(re.a.Text,null,r.a.createElement(le.a,{format:"MM/DD/YYYY"},t.startDate)),r.a.createElement(re.a.Text,null,t.notes)),r.a.createElement(oe,{listing:t}))})))))}}]),t}(n.Component),ie=a(206),ue=a(209),me=a.n(ue),de=(a(379),function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object($.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).state={address:"",startDate:new Date,notes:""},a.saveListing=function(){G.saveListing().then((function(e){return a.setState({listings:e.data,address:"",startDate:new Date,notes:""})})).catch((function(e){return console.log(e)}))},a.handleChange=function(e){a.setState({startDate:e})},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(V.a)({},n,r))},a.handleFormSubmit=function(e){e.preventDefault(),a.state.address&&a.state.startDate&&G.saveListing({address:a.state.address,date:a.state.startDate,notes:a.state.notes}).then((function(e){a.props.history.push("/listings")})).catch((function(e){return console.log(e)}))},a}return Object(Q.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{show:!0,onHide:function(){return e.props.history.push("/listings")},animation:!1,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(S.a.Header,{closeButton:!0},r.a.createElement(S.a.Title,{id:"contained-modal-title-vcenter"},"New Listing")),r.a.createElement(S.a.Body,null,r.a.createElement(te,{fluid:!0},r.a.createElement(ae,null,r.a.createElement(ne,{size:"md-6"},r.a.createElement(ee,null,r.a.createElement("h1",null,"Add a new property listing")),r.a.createElement(O.a,null,r.a.createElement(ie.a,null,r.a.createElement(O.a.Label,null,"Address"),r.a.createElement(W,{value:this.state.address,onChange:this.handleInputChange,name:"address",placeholder:"(required)"}),r.a.createElement(O.a.Label,null,"Date Listed"),r.a.createElement(me.a,{selected:this.state.startDate,onSelect:this.handleSelect,onChange:this.handleChange,dateFormat:"MM/dd/yy",name:"date",placeholder:"Date Listed (required)"}),r.a.createElement(O.a.Label,null,"Notes"),r.a.createElement(J,{value:this.state.notes,onChange:this.handleInputChange,name:"notes",placeholder:"(Optional)"}))))))),r.a.createElement(S.a.Footer,null,r.a.createElement(P,{disabled:!(this.state.startDate&&this.state.address),onClick:this.handleFormSubmit},"Submit Listing")))}}]),t}(n.Component)),pe=a(212),ge=a.n(pe);var he=function(){return r.a.createElement(te,{fluid:!0},r.a.createElement(ae,null,r.a.createElement(ne,{size:"md-12"},r.a.createElement(ee,null,r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement("h1",null,r.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44"))))))},Ee=a(452),fe=Object(l.b)((function(e){return{user:e.user.details}}),{onLogout:_})((function(e){return r.a.createElement(Ee.a,{className:"navbar-expand-lg navbar-dark bg-primary justify-content-between"},r.a.createElement(Ee.a.Brand,{href:"/"},"Realtor Assist"),e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/AddNewListing"},r.a.createElement(y.a,null,"Add New Listing")),r.a.createElement(y.a,{onClick:e.onLogout},"Logout")):r.a.createElement(f.b,{to:"/login"},r.a.createElement(y.a,null,"Login")))})),be=T.object({firstName:T.string().required(),lastName:T.string().required(),email:T.string().required().email(),username:T.string().required().min(3),password:T.string().required().min(8)}),ve=Object(l.b)(null,{onLogin:x})((function(e){return r.a.createElement(S.a,{show:!0,onHide:function(){return e.history.push("/")},animation:!1,size:"lg","aria-labelledby":"signup-form",centered:!0},r.a.createElement(S.a.Header,{closeButton:!0},r.a.createElement(S.a.Title,{id:"signup-form"},"Realtor Assist Signup")),r.a.createElement(S.a.Body,null,r.a.createElement("h5",{className:"card-title"},"Signup to create your property listing checklists"),r.a.createElement(B.a,{initialValues:{firstName:"",lastName:"",email:"",username:"",password:""},validationSchema:be,onSubmit:function(t,a){var n;return L.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,L.a.awrap(G.signup(t));case 3:(n=r.sent).success?e.onLogin(n.tokens):a.setErrors(n.errors),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),a.setStatus(r.t0);case 10:return r.abrupt("return");case 11:case"end":return r.stop()}}),null,null,[[0,7]])}},(function(e){var t=e.status,a=e.values,n=e.errors,s=e.touched,l=e.handleChange,o=e.handleBlur,c=e.handleSubmit,i=e.isSubmitting;return r.a.createElement(O.a,{noValidate:!0,onSubmit:c},r.a.createElement(U,{axiosError:t}),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:k.a,controlId:"signupFirstName"},r.a.createElement(O.a.Label,null,"First name"),r.a.createElement(O.a.Control,{required:!0,autoComplete:"given-name",name:"firstName",type:"text",placeholder:"First name",onChange:l,onBlur:o,value:a.firstName,isInvalid:!!n.firstName}),r.a.createElement(O.a.Control.Feedback,{type:"invalid"},n.firstName&&s.firstName&&n.firstName))),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:k.a,controlId:"signupLastName"},r.a.createElement(O.a.Label,null,"Last name"),r.a.createElement(O.a.Control,{required:!0,autoComplete:"family-name",name:"lastName",type:"text",placeholder:"Last name",onChange:l,onBlur:o,value:a.lastName,isInvalid:!!n.lastName}),r.a.createElement(O.a.Control.Feedback,{type:"invalid"},n.lastName&&s.lastName&&n.lastName))),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:k.a,controlId:"signupEmail"},r.a.createElement(O.a.Label,null,"Email address"),r.a.createElement(O.a.Control,{required:!0,autoComplete:"email",name:"email",type:"email",placeholder:"Email address",onChange:l,onBlur:o,value:a.email,isInvalid:!!n.email}),r.a.createElement(O.a.Control.Feedback,{type:"invalid"},n.email&&s.email&&n.email))),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:k.a,controlId:"username"},r.a.createElement(O.a.Label,null,"Username"),r.a.createElement(O.a.Control,{required:!0,name:"username",autoComplete:"username",placeholder:"Username",onChange:l,onBlur:o,value:a.username,isInvalid:!!n.username}),r.a.createElement(O.a.Control.Feedback,{type:"invalid"},n.username&&s.username&&n.username))),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:k.a,controlId:"Password"},r.a.createElement(O.a.Label,null,"Password"),r.a.createElement(O.a.Control,{required:!0,autoComplete:"new-password",name:"password",type:"password",onChange:l,onBlur:o,value:a.password,isInvalid:!!n.password}),r.a.createElement(O.a.Control.Feedback,{type:"invalid"},n.password&&s.password&&n.password))),r.a.createElement(y.a,{type:"submit",className:"btn btn-primary",disabled:i},"Submit"))})),r.a.createElement(f.b,{className:"link",to:"/login"},"Already have an account? ",r.a.createElement("span",{className:"link-signup"},"Login"))))}));function we(){return r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(fe,null),r.a.createElement(b.d,null,r.a.createElement(Ce,{exact:!0,path:"/",component:N}),r.a.createElement(Ce,{path:"/login",component:z}),r.a.createElement(Ce,{path:"/signup",component:ve}),r.a.createElement(ke,{exact:!0,path:"/listings",component:ce}),r.a.createElement(ke,{path:"/AddNewListing",component:de}),r.a.createElement(ke,{path:"/listings/:id",component:ge.a}),r.a.createElement(b.b,{path:"*"},r.a.createElement(he,null)))))}var ke=Object(l.b)((function(e){return{user:e.user.details}}))((function(e){var t=e.component,a=Object(E.a)(e,["component"]);return r.a.createElement(b.b,Object.assign({},a,{render:function(e){return a.user?r.a.createElement(t,e):r.a.createElement(b.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));var Ce=Object(l.b)((function(e){return{user:e.user.details}}))((function(e){var t=e.component,a=Object(E.a)(e,["component"]);return r.a.createElement(b.b,Object.assign({},a,{render:function(e){return a.user?r.a.createElement(b.a,{to:{pathname:"/listings"}}):r.a.createElement(t,e)}}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(s.render)(r.a.createElement(l.a,{store:h},r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[213,1,2]]]);
//# sourceMappingURL=main.7a3730ea.chunk.js.map